// server.js
const WebSocket = require("ws");

const base64Image = `data:image/jpeg;base64,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`; // Use full base64 here

const wss = new WebSocket.Server({ port: 8080 }, () => {
  console.log("WebSocket server running at ws://localhost:8080");
});

wss.on("connection", function connection(ws) {
  ws.on("message", function incoming(message) {
    console.log("Received from client:", message.toString());
    ws.send(base64Image); // send image as base64
  });
});
